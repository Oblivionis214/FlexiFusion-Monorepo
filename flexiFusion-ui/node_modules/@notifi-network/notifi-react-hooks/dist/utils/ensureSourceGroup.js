"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const updateSourceGroup = async (service, existing, input) => {
    const sourceGroupId = existing.id;
    if (sourceGroupId === null) {
        throw new Error('Invalid source group');
    }
    return await service.updateSourceGroup(Object.assign({ id: sourceGroupId }, input));
};
const ensureSourceGroup = async (service, existing, input) => {
    const existingIndex = existing.findIndex((it) => it.name === input.name);
    if (existingIndex >= 0) {
        const result = await updateSourceGroup(service, existing[existingIndex], input);
        existing[existingIndex] = result;
        return result;
    }
    else {
        const result = await service.createSourceGroup(input);
        existing.push(result);
        return result;
    }
};
exports.default = ensureSourceGroup;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5zdXJlU291cmNlR3JvdXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvdXRpbHMvZW5zdXJlU291cmNlR3JvdXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFPQSxNQUFNLGlCQUFpQixHQUFHLEtBQUssRUFDN0IsT0FBaUMsRUFDakMsUUFBcUIsRUFDckIsS0FBNkIsRUFDUCxFQUFFO0lBQ3hCLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUM7SUFDbEMsSUFBSSxhQUFhLEtBQUssSUFBSSxFQUFFO1FBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztLQUN6QztJQUVELE9BQU8sTUFBTSxPQUFPLENBQUMsaUJBQWlCLGlCQUNwQyxFQUFFLEVBQUUsYUFBYSxJQUNkLEtBQUssRUFDUixDQUFDO0FBQ0wsQ0FBQyxDQUFDO0FBRUYsTUFBTSxpQkFBaUIsR0FBRyxLQUFLLEVBQzdCLE9BQTRELEVBQzVELFFBQXVCLEVBQ3ZCLEtBQTZCLEVBQzdCLEVBQUU7SUFDRixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN6RSxJQUFJLGFBQWEsSUFBSSxDQUFDLEVBQUU7UUFDdEIsTUFBTSxNQUFNLEdBQUcsTUFBTSxpQkFBaUIsQ0FDcEMsT0FBTyxFQUNQLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFDdkIsS0FBSyxDQUNOLENBQUM7UUFDRixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQ2pDLE9BQU8sTUFBTSxDQUFDO0tBQ2Y7U0FBTTtRQUNMLE1BQU0sTUFBTSxHQUFHLE1BQU0sT0FBTyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RELFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEIsT0FBTyxNQUFNLENBQUM7S0FDZjtBQUNILENBQUMsQ0FBQztBQUVGLGtCQUFlLGlCQUFpQixDQUFDIn0=