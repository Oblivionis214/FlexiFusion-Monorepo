"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const updateTargetGroup = async (service, existing, input) => {
    const targetGroupId = existing.id;
    if (targetGroupId === null) {
        throw new Error('Invalid target group');
    }
    return await service.updateTargetGroup(Object.assign({ id: targetGroupId }, input));
};
const ensureTargetGroup = async (service, existing, input) => {
    const existingIndex = existing.findIndex((it) => it.name === input.name);
    if (existingIndex >= 0) {
        const result = await updateTargetGroup(service, existing[existingIndex], input);
        existing[existingIndex] = result;
        return result;
    }
    else {
        const result = await service.createTargetGroup(input);
        existing.push(result);
        return result;
    }
};
exports.default = ensureTargetGroup;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5zdXJlVGFyZ2V0R3JvdXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvdXRpbHMvZW5zdXJlVGFyZ2V0R3JvdXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFPQSxNQUFNLGlCQUFpQixHQUFHLEtBQUssRUFDN0IsT0FBaUMsRUFDakMsUUFBcUIsRUFDckIsS0FBNkIsRUFDUCxFQUFFO0lBQ3hCLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUM7SUFDbEMsSUFBSSxhQUFhLEtBQUssSUFBSSxFQUFFO1FBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztLQUN6QztJQUVELE9BQU8sTUFBTSxPQUFPLENBQUMsaUJBQWlCLGlCQUNwQyxFQUFFLEVBQUUsYUFBYSxJQUNkLEtBQUssRUFDUixDQUFDO0FBQ0wsQ0FBQyxDQUFDO0FBRUYsTUFBTSxpQkFBaUIsR0FBRyxLQUFLLEVBQzdCLE9BQTRELEVBQzVELFFBQTRCLEVBQzVCLEtBQTZCLEVBQ1AsRUFBRTtJQUN4QixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN6RSxJQUFJLGFBQWEsSUFBSSxDQUFDLEVBQUU7UUFDdEIsTUFBTSxNQUFNLEdBQUcsTUFBTSxpQkFBaUIsQ0FDcEMsT0FBTyxFQUNQLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFDdkIsS0FBSyxDQUNOLENBQUM7UUFDRixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQ2pDLE9BQU8sTUFBTSxDQUFDO0tBQ2Y7U0FBTTtRQUNMLE1BQU0sTUFBTSxHQUFHLE1BQU0sT0FBTyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RELFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEIsT0FBTyxNQUFNLENBQUM7S0FDZjtBQUNILENBQUMsQ0FBQztBQUVGLGtCQUFlLGlCQUFpQixDQUFDIn0=